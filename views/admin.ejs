<%- include('templates/header'); -%>
<body class="bgg">
    <%- include('templates/nav'); -%>
    
    <div class="container">
        <h1 class="text-white fs-1 text-center pt-3">Painel Admin</h1>
        <div class="row">
            <div class="col-12">
                <table class="table textoo" style="background-color: #fff;">
                    <thead>
                      <tr>
                        <th scope="col">Ação</th>
                        <th scope="col">Nome do Cliente</th>
                        <th scope="col">Massa</th>
                        <th scope="col">Borda</th>
                        <th scope="col">Sabores</th>
                        <th scope="col">Status</th>
                        <th scope="col">Mudar Status</th>b
                      </tr>
                    </thead>
                    <tbody>
                        <% for (var i=0; i < lista.length; i++) { %>
                      <tr>
                        <th scope="row"><button type="button" class="btn btn-danger textoo" value="<%= lista[i].id %>" onclick="apagar(this.value)">Apagar</button></th>
                        <td><%= lista[i].nomeCliente %></td>
                        <td><%= lista[i].massas %></td>
                        <td><%= lista[i].bordas %></td>
                        
                        <% var stringSabor = JSON.stringify(lista[i].sabores) 
                        const words1 = stringSabor.replaceAll('[{"nome":"', '');
                        const words2 = words1.replaceAll('[', '');
                        const words3 = words2.replaceAll(']', '');
                        const words4 = words3.replace('"}]', '');
                        const words5 = words4.replace('"}]', '');
                        const words6 = words5.replaceAll('"}', '');
                        const saborNomes = words6.replace('"}]]', '');
                        %>
                        
                        <td><%= saborNomes %></td>
                        <td><%= lista[i].status %></td>
                        <td>
                            <select name="status" id="<%= lista[i].id %>" onchange="alterarStatus(this.id)">
                                <option disabled>Status</option>
                                <option value="1">Em produção</option>
                                <option value="2">Entregando</option>
                                <option value="3">Pedido Entregue</option>
                            </select>
                        </td>
                      </tr>
                      <% } %>
                    </tbody>
                  </table>
            </div>
        </div>
        <div class="row">
            <div class="col-12">
                <canvas id="myChart" style="background-color: #fff; border-radius:2 rem;"></canvas>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="/javascripts/adm.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
</body>

</html>